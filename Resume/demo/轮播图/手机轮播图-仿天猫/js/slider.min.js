function slider(e){function t(){B=setInterval(function(){if(I++,s(2),l(-I*y),c(),I<f.length-1&&m(I-1),I==f.length-1){m(0);var e=setTimeout(function(){I=1,s(0),l(-y),clearTimeout(e)},2*b+1)}},Math.max(e.time,1200))}function n(){clearInterval(B);var e=event||window.event;W=e.screenX||e.targetTouches[0].screenX,D=new Date,h.addEventListener("touchmove",r,!1),document.ontouchmove=function(){return!1},h.addEventListener("mousemove",r,!1),document.onmousemove=function(){return!1},clearTimeout(C);var t=u();t==y*(f.length-1)&&(m(0),I=1,s(0),l(-y));var n=u();0==n&&(I=f.length-2,c(),m(I-1),s(0),l(-I*y))}function i(){clearInterval(B),t(),h.removeEventListener("touchmove",r,!1),document.ontouchmove=null,h.removeEventListener("mousemove",r,!1),document.onmousemove=null,M=new Date-D,30<M&&M<280?o():M>=280&&a(),X=0}function o(){X<0&&0!=X?(I++,s(1),l(-I*y),c(),I<f.length-1&&m(I-1),I==f.length-1&&(m(0),I=1,C=setTimeout(function(){s(0),l(-I*y),clearTimeout(C)},b+1))):X>0&&0!=X&&(I--,s(1),l(-I*y),c(),0<I&&I<f.length-1&&m(I-1),I==f.length-1&&m(0),0==I&&(I=f.length-2,c(),m(I-1),C=setTimeout(function(){s(0),l(-I*y),clearTimeout(C)},b+1)))}function r(){var e=event||window.event;X=(e.screenX||e.targetTouches[0].screenX)-W;var t=Math.min(I*y-X,y*(f.length-1));s(0),l(-t)}function a(){s(1);var e=u();if(e-I*y>y/2)I++,l(-I*y),c(),I<f.length-1&&m(I-1),I==f.length-1&&m(0);else if(e-I*y<-y/2){if(I--,l(-I*y),c(),0<I&&I<f.length-1&&m(I-1),I==f.length-1&&m(0),0==I){I=f.length-2,c(),m(I-1);var t=setTimeout(function(){s(0),l(-I*y),clearTimeout(t)},b+1)}}else Math.abs(e-I*y)<y/2&&(s(1),l(-I*y));if(I==f.length-1){m(0);var t=setTimeout(function(){I=1,s(0),l(-y),clearTimeout(t)},b+1)}else if(0==I){m(f.length-2);var t=setTimeout(function(){I=f.length-2,s(0),l(-I*y),clearTimeout(t)},b+1)}}function s(e){d.style.transitionDuration=e*b+"ms",d.style.webkitTransitionDuration=e*b+"ms"}function l(e){var t="translate3d(",n="px, 0px, 0px) translateZ(0px)";d.style.transform=t+e+n,d.style.webkitTransform=t+e+n}function u(){return parseInt((d.style.transform.match(/\([\S]+,/g)+"").replace(/\-|\(|px|\,/g,""))}function m(e){L[e].className="active-dots"}function c(){for(var e=0;e<L.length;e++)L[e].className=""}var h=document.querySelector(e.id),d=h.getElementsByTagName("div")[0],f=d.getElementsByClassName("slider-item"),g=f[0].cloneNode(!0),v=f[f.length-1].cloneNode(!0);d.appendChild(g),d.insertBefore(v,d.childNodes[0]);var p=h.getElementsByTagName("a"),T=h.getElementsByTagName("img"),y=h.offsetWidth,w=.58*y;h.style.height=w+"px",l(-y);for(var x=0;x<p.length;x++)p[x].style.width=y+"px",p[x].style.height=w+"px",T[x].setAttribute("onload","fitImage(this.parentNode, this)"),fitImage(T[x].parentNode,T[x]);var E=document.createElement("div");E.className="silder-dots";for(var N="",x=0;x<p.length-2;x++)N+="<i></i>";E.innerHTML=N,h.appendChild(E);var L=E.getElementsByTagName("i");m(0);var I=1,b=500,B=e.id.replace(/\#/g,"Ival"),k=setTimeout(function(){var e="transform",t="cubic-bezier(0.165, 0.84, 0.44, 1)";d.style.transitionProperty=e,d.style.transitionTimingFunction=t,d.style.webkitTransitionProperty=e,d.style.webkitTransitionTimingFunction=t,s(2),clearTimeout(k)},1);t(),window.addEventListener("resize",function(){if(y!=h.offsetWidth){I=1,y=h.offsetWidth,w=.58*y,h.style.height=w+"px";for(var e=0;e<p.length;e++)p[e].style.width=y+"px",p[e].style.height=w+"px",fitImage(T[e].parentNode,T[e]);c(),m(0),h.style.height=w+"px",l(-y)}},!1);var D,M,W=0,X=0;h.addEventListener("touchstart",n,!1),h.addEventListener("mousedown",n,!1),h.addEventListener("touchend",i,!1),h.addEventListener("mouseup",i,!1);var C;h.ondragstart=function(){return!1}}function fitImage(e,t){var n=e.offsetWidth,i=e.offsetHeight,o=t.width,r=t.height,a="",s=n/i,l=o/r;a=s>=l?n/o:i/r,t.style.width=o*a+"px",t.style.height=r*a+"px",t.style.marginLeft=(n-t.width)/2+"px",t.style.marginTop=(i-t.height)/2+"px"}