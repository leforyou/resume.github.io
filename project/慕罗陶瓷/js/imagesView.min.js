function ImageViewer(e){function t(e){var e=e||window.event;F=e.pageX||e.targetTouches[0].pageX,V=e.clientY||e.targetTouches[0].clientY,j=new Date,document.addEventListener("touchmove",i,!1),document.addEventListener("mousemove",i,!1),document.ontouchmove=function(){return!1},document.onmousemove=function(){return!1}}function n(e){var e=e||window.event;P=e.pageX||e.changedTouches[0].pageX,V=e.clientY||e.changedTouches[0].clientY,A=new Date,q=Math.abs(P-F)/Math.abs(Z-V);var t=A-j;q>3&&(t>30&&t<280?a():t>280&&o()),document.removeEventListener("touchmove",i,!1),document.removeEventListener("mousemove",i,!1),document.ontouchmove=null,document.onmousemove=null}function i(e){var e=e||window.event;if(P=e.pageX||e.targetTouches[0].pageX,Z=e.clientY||e.targetTouches[0].clientY,q=Math.abs(P-F)/Math.abs(Z-V),q>3){r(0);var t=-(D*d)+(P-F);c(t)}}function a(){var e=P-F;r(B),e<-1?(d++,d==p&&(d=p-1),c(-D*d)):e>1&&(d--,d==-1&&(d=0),c(-D*d))}function o(){var e=P-F,t=D/2;r(B),e>t?(d--,d==-1&&(d=0),c(-D*d)):e<-t?(d++,d==p&&(d=p-1),c(-D*d)):Math.abs(e)<t&&c(-D*d)}function s(){C.style.transitionProperty="transform",C.style.msTransitionProperty="transform",C.style.mozTransitionProperty="transform",C.style.webkitTransitionProperty="transform",C.style.transitionTimingFunction="cubic-bezier(0.165, 0.84, 0.44, 1)",C.style.msTransitionTimingFunction="cubic-bezier(0.165, 0.84, 0.44, 1)",C.style.mozTransitionTimingFunction="cubic-bezier(0.165, 0.84, 0.44, 1)",C.style.webkitTransitionTimingFunction="cubic-bezier(0.165, 0.84, 0.44, 1)"}function r(e){C.style.transitionDuration=e+"ms",C.style.msTransitionDuration=e+"ms",C.style.mozTransitionDuration=e+"ms",C.style.webkitTransitionDuration=e+"ms"}function c(e){C.style.transform="translate3d("+e+"px, 0px, 0px) translateZ(0px)",C.style.msTransform="translate3d("+e+"px, 0px, 0px) translateZ(0px)",C.style.mozTransform="translate3d("+e+"px, 0px, 0px) translateZ(0px)",C.style.webkitTransform="translate3d("+e+"px, 0px, 0px) translateZ(0px)",m(d)}function m(e){for(var t=b.getElementsByTagName("i"),n=0;n<t.length;n++)t[n].className=t[n].className.replace(/(viewDotActive)/g,"").trim();t[e].className=" viewDotActive",k.getElementsByTagName("span")[0].innerHTML=d+1+"/"+p}var l=e.images,d=e.lctnNum||0,u=e.showNum||!1,p=l.length,h=document.querySelector(e.id),g=document.createElement("ul");g.className="imgview-group";for(var f="",v="",y=0;y<p;y++)f+='<li class="imgview-item"><a href="javascript:void(0)"><img src="'+l[y].img+'" onload="fitImgViewWrap(this.parentNode,this)"/></a></li>',v+='<li class="check-imgs-item"><div class="check-imgs-title">'+(l[y].title||"")+'</div><a href="javascript:void(0)"><img src="'+l[y].img+'" onload="fitImgCheck(this.parentNode,this)"/></a></li>';g.innerHTML=f,h.appendChild(g);for(var T=g.getElementsByTagName("img"),y=0;y<T.length;y++)fitImgViewWrap(T[y].parentNode,T[y]);var w=document.createElement("div");w.className="wrap-check-imgs";var x=document.createElement("i"),N=document.createElement("i"),E=document.createElement("i"),b=document.createElement("div"),k=document.createElement("div"),L=document.createElement("div"),C=document.createElement("ul");C.innerHTML=v,x.className="left-btn",N.className="right-btn",E.className="close-btn",b.className="view-img-dot",k.className="view-num",L.className="check-imgs",C.className="check-imgs-box";for(var M="",y=0;y<p;y++)M+="<i></i>";b.innerHTML=M,k.innerHTML="<span></span>",L.appendChild(C);var z=document.createDocumentFragment();z.appendChild(x),z.appendChild(N),z.appendChild(E),z.appendChild(b),z.appendChild(k),z.appendChild(L),w.appendChild(z),h.appendChild(w),b.style.marginLeft=-b.offsetWidth/2+"px",m(d);for(var D=document.documentElement.clientWidth,I=C.getElementsByTagName("a"),W=C.getElementsByTagName("img"),y=0;y<I.length;y++)I[y].parentNode.style.width=D+"px",fitImgCheck(W[y].parentNode,W[y]);1==u&&(b.style.display="none",k.style.display="block");var B=500,H=80;s(),r(0),c(0);for(var X=g.getElementsByTagName("li"),y=0;y<X.length;y++)X[y].index=y,X[y].onclick=function(){d=this.index,r(0),c(-d*D),w.style.top="0%"};E.onclick=function(){w.style.top="100%"},x.onclick=function(){if(d--,r(B),d<0){d=0,c(H);var e=setTimeout(function(){c(0),clearTimeout(e)},B/2)}else c(-d*D)},N.onclick=function(){if(d++,r(B),d==p){d=p-1,c(-d*D-H);var e=setTimeout(function(){c(-d*D),clearTimeout(e)},B/2)}else c(-d*D)};for(var Y=b.getElementsByTagName("i"),y=0;y<Y.length;y++)Y[y].index=y,Y[y].onclick=function(){d=this.index,r(B),c(-d*D)};var F,P,V,Z,j,A,q;L.addEventListener("touchstart",t,!1),L.addEventListener("mousedown",t,!1),document.addEventListener("touchend",n,!1),document.addEventListener("mouseup",n,!1),window.addEventListener("resize",function(){D=document.documentElement.clientWidth;for(var e=0;e<W.length;e++)I[e].parentNode.style.width=D+"px",fitImgCheck(W[e].parentNode,W[e])},!1),w.ondragstart=function(){return!1}}function fitImgCheck(e,t){var n=e.offsetWidth,i=e.offsetHeight,a=new Image;a.src=t.src;var o=a.width,s=a.height;if(0!=o&&0!=s)if(t.style.marginTop="0px",o<n&&s<i)t.style.width="auto",t.style.height="auto",t.style.marginTop=(i-s)/2+"px";else if(o>=n&&s<i)t.style.width=n+"px",t.style.marginTop=(i-s*n/o)/2+"px";else if(o<n&&s>=i)t.style.width="auto",t.style.height=i+"px";else if(o>n&&s>i){var r=n/i,c=o/s;r>=c?(t.style.width="auto",t.style.height=i+"px"):(t.style.width=n+"px",t.style.marginTop=(i-s*n/o)/2+"px")}}function fitImgViewWrap(e,t){var n=e.offsetWidth,i=e.offsetHeight,a=t.width,o=t.height,s="",r=n/i,c=a/o;s=r>=c?n/a:i/o,t.style.width=a*s+"px",t.style.height=o*s+"px",t.style.marginLeft=(n-t.width)/2+"px",t.style.marginTop=(i-t.height)/2+"px"}